{% extends "base.html" %}
{% block title %}Dashboard{% endblock title %}
{% block content %}
<!-- Food Order -->
<section class="bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased">
    <div class="mx-auto max-w-screen-xl px-4 lg:px-12">
        <h3 class="text-xl font-bold dark:text-white text-center my-8">Food Order</h3>
        <div class="bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden">
            <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4">
                <div class="w-full md:w-1/2">
                    <form>   
                        <label for="order-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                        <div class="relative w-full">
                            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                                </svg>
                            </div>
                            <input type="search" id="order-search" class="block w-full p-3 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search Food Order ..." required>
                        </div>
                    </form>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table id="orderTable" class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-4 py-4">ID</th>
                            <th scope="col" class="px-4 py-3">Order Day</th>
                            <th scope="col" class="px-4 py-3">Redemption</th>
                            <th scope="col" class="px-4 py-3">Menu Set</th>
                            <th scope="col" class="px-4 py-3">Type</th>
                            <th scope="col" class="px-4 py-3">Description</th>
                            <th scope="col" class="px-4 py-3">Main Course</th>
                            <th scope="col" class="px-4 py-3">Beverage</th>
                            <th scope="col" class="px-4 py-3">Image</th>
                            <th scope="col" class="px-4 py-3">Student ID</th>
                            <th scope="col" class="px-4 py-3">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for order in orders %}
                          <tr class="border-b dark:border-gray-700">
                              <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{
                              loop.index }}</th>
                              <td class="px-4 py-3">{{ order.ORDER_DAY }}</td>
                              <td class="px-4 py-3">{{ order.REDEMPTION }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">{{ order.MENU_ID }}</td>
                              <td class="px-4 py-3">
                                  <img class="w-20 h-20" src="{{ menu.IMAGE }}" alt="{{ menu.SET }} image">
                              </td>
                          </tr>
                      {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Transaction -->
<section class="bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased">
    <div class="mx-auto max-w-screen-xl px-4 lg:px-12">
        <h3 class="text-xl font-bold dark:text-white text-center my-8">Transaction</h3>
        <div class="bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden">
            <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4">
                <div class="w-full md:w-1/2">
                    <form>   
                        <label for="transaction-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                        <div class="relative w-full">
                            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                                </svg>
                            </div>
                            <input type="search" id="transaction-search" class="block w-full p-3 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search Transaction History ..." required>
                        </div>
                    </form>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table id="transactionTable" class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-4 py-4">ID</th>
                            <th scope="col" class="px-4 py-3">Date Time</th>
                            <th scope="col" class="px-4 py-3">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for transaction in transactions %}
                          <tr class="border-b dark:border-gray-700">
                              <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{
                              loop.index }}</th>
                              <td class="px-4 py-3">{{ transaction.id }}</td>
                              <td class="px-4 py-3">{{ transaction.DATE_TIME }}</td>
                              <td class="px-4 py-3">{{ transaction.AMOUNT }}</td>
                          </tr>
                      {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<!-- Reload -->
<section class="bg-gray-50 dark:bg-gray-900 p-3 sm:p-5 antialiased">
    <div class="mx-auto max-w-screen-xl px-4 lg:px-12">
        <h3 class="text-xl font-bold dark:text-white text-center my-8">Reload</h3>
        <div class="bg-white dark:bg-gray-800 relative shadow-md sm:rounded-lg overflow-hidden">
            <div class="flex flex-col md:flex-row items-center justify-between space-y-3 md:space-y-0 md:space-x-4 p-4">
                <div class="w-full md:w-1/2">
                    <form>   
                        <label for="reload-search" class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                        <div class="relative w-full">
                            <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                                </svg>
                            </div>
                            <input type="search" id="reload-search" class="block w-full p-3 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search Reload History ..." required>
                        </div>
                    </form>
                </div>
            </div>
            <div class="overflow-x-auto">
                <table id="reloadTable" class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                        <tr>
                            <th scope="col" class="px-4 py-4">ID</th>
                            <th scope="col" class="px-4 py-3">Date Time</th>
                            <th scope="col" class="px-4 py-3">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for reload in reloads %}
                          <tr class="border-b dark:border-gray-700">
                              <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{
                              loop.index }}</th>
                              <td class="px-4 py-3">{{ reload.id }}</td>
                              <td class="px-4 py-3">{{ reload.DATE_TIME }}</td>
                              <td class="px-4 py-3">{{ reload.AMOUNT }}</td>
                          </tr>
                      {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const ordertable = document.getElementById("orderTable");
        const orderrows = menutable.getElementsByTagName("tr");
        const orderSearch = document.getElementById("order-search");

        const transactiontable = document.getElementById("transactionTable");
        const transactionrows =transactiontable.getElementsByTagName("tr");
        const transactionSearch = document.getElementById("transaction-search");

        const reloadtable = document.getElementById("reloadTable");
        const reloadrows = reloadtable.getElementsByTagName("tr");
        const reloadSearch = document.getElementById("reload-search");

        orderSearch.addEventListener("keyup", function () {
            const value = orderSearch.value.toLowerCase();

            for (let i = 1; i < orderrows.length; i++) {
                const row = orderrows[i];
                let rowContainsValue = false;

                for (let j = 1; j <= 6; j++) {
                    const cellContent = row.cells[j].textContent.toLowerCase();
                    if (cellContent.includes(value)) {
                        rowContainsValue = true;
                        break;
                    }
                }

                if (rowContainsValue) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });


        transactionSearch.addEventListener("keyup", function () {
            const value = transactionSearch.value.toLowerCase();

            for (let i = 1; i < transactionrows.length; i++) {
                const row = transactionrows[i];
                let rowContainsValue = false;

                for (let j = 1; j <= 3; j++) {
                    const cellContent = row.cells[j].textContent.toLowerCase();
                    if (cellContent.includes(value)) {
                        rowContainsValue = true;
                        break;
                    }
                }

                if (rowContainsValue) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });
    
        reloadSearch.addEventListener("keyup", function () {
            const value = reloadSearch.value.toLowerCase();

            for (let i = 1; i < reloadrows.length; i++) {
                const row = reloadrows[i];
                let rowContainsValue = false;

                for (let j = 1; j <= 3; j++) {
                    const cellContent = row.cells[j].textContent.toLowerCase();
                    if (cellContent.includes(value)) {
                        rowContainsValue = true;
                        break;
                    }
                }

                if (rowContainsValue) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            }
        });
    
      });
</script>

{% endblock content %}