{% extends "base.html" %} 
{% block title %}Profile{% endblock title %}
{% block content %}
<div
  class="flex flex-col items-center justify-center px-6 py-20 mx-auto"
>
  <div
    class="w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"
  >
    <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
      <div class="photo-wrapper p-2">
        <img class="w-32 h-32 rounded-full mx-auto" src="{{ image_file }}" />
      </div>
      <div class="p-2">
        <h2 class="text-center text-blue-500 text-2xl font-medium leading-8">
          {{ current_user.username }}
        </h2>
        <p class="text-center text-gray-400 text-lg font-semibold">
          {{ current_user.email }}
        </p>
      </div>

      <form
        method="POST"
        action=""
        class="space-y-4 md:space-y-6"
        enctype="multipart/form-data"
      >
        {{ form.hidden_tag() }}
        <fieldset class="form-group">
          <div class="mb-4">
            {{ form.username.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} {% if form.username.errors %}
            {{ form.username(class="bg-gray-50 border-2 border-red-600
            text-red-600 sm:text-sm rounded-lg focus:ring-red-900
            focus:border-red-600 block w-full p-2.5") }}
            <div class="text-red-600 mt-2">
              {% for error in form.username.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.username(class="bg-gray-50 border
            border-gray-300 text-gray-900 sm:text-sm rounded-lg
            focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5
            dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400
            dark:text-white dark:focus:ring-blue-500
            dark:focus:border-blue-500") }} {% endif %}
          </div>
          <div class="mb-4">
            {{ form.email.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} {% if form.email.errors %} {{
            form.email(class="bg-gray-50 border-2 border-red-600 text-red-600
            sm:text-sm rounded-lg focus:ring-red-900 focus:border-red-600
            block w-full p-2.5") }}
            <div class="text-red-600 mt-2">
              {% for error in form.email.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.email(class="bg-gray-50 border border-gray-300
            text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600
            focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
            dark:focus:ring-blue-500 dark:focus:border-blue-500") }} {% endif
            %}
          </div>
          <div class="mb-4">
            {{ form.firstname.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} {% if form.firstname.errors %} {{
            form.firstname(class="bg-gray-50 border-2 border-red-600 text-red-600
            sm:text-sm rounded-lg focus:ring-red-900 focus:border-red-600
            block w-full p-2.5") }}
            <div class="text-red-600 mt-2">
              {% for error in form.firstname.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.firstname(class="bg-gray-50 border border-gray-300
            text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600
            focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
            dark:focus:ring-blue-500 dark:focus:border-blue-500") }} {% endif
            %}
          </div>
          <div class="mb-4">
            {{ form.lastname.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} {% if form.lastname.errors %} {{
            form.lastname(class="bg-gray-50 border-2 border-red-600 text-red-600
            sm:text-sm rounded-lg focus:ring-red-900 focus:border-red-600
            block w-full p-2.5") }}
            <div class="text-red-600 mt-2">
              {% for error in form.lastname.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.lastname(class="bg-gray-50 border border-gray-300
            text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600
            focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
            dark:focus:ring-blue-500 dark:focus:border-blue-500") }} {% endif
            %}
          </div>
          <div class="mb-4">
            {{ form.phone.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} {% if form.phone.errors %} {{
            form.phone(class="bg-gray-50 border-2 border-red-600 text-red-600
            sm:text-sm rounded-lg focus:ring-red-900 focus:border-red-600
            block w-full p-2.5") }}
            <div class="text-red-600 mt-2">
              {% for error in form.phone.errors %}
              <span>{{ error }}</span>
              {% endfor %}
            </div>
            {% else %} {{ form.phone(class="bg-gray-50 border border-gray-300
            text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600
            focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white
            dark:focus:ring-blue-500 dark:focus:border-blue-500") }} {% endif
            %}
          </div>
          {% if current_user.ROLE == 'parent' %}
          <div class="mb-4">
            {{ form.ewallet_balance.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} 
            {{ form.ewallet_balance(class="bg-gray-50
            text-gray-900 sm:text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white", readonly="readonly") }}
          </div>
          {% elif current_user.ROLE == 'student' %}
          <div class="mb-4">
            {{ form.status.label(class="block mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} 
            {{ form.status(class="bg-gray-50
            text-gray-900 sm:text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700
            dark:border-gray-600 dark:placeholder-gray-400 dark:text-white", readonly="readonly") }}
          </div>
          {% endif %}
          <div class="mb-4">
            {{ form.picture.label(class="block mt-2 mb-2 text-md font-medium
            text-gray-900 dark:text-white") }} 
            {{ form.picture(class="block mb-2 bg-blue-700 text-sm font-medium text-gray-900 dark:text-white") }} 
            {% if form.picture.errors %} 
            {% for error in form.picture.errors %}
            <span class="text-red-600 mt-2">{{ error }}</span><br />
            {% endfor %} {% endif %}
          </div>
          {% if current_user.ROLE == 'student' %}
          <div class="relative overflow-x-auto my-10">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <thead class="text-xs text-white uppercase bg-blue-700">
                <tr>
                  <th scope="col" class="px-6 py-3">
                    Parent's first name
                  </th>
                  <th scope="col" class="px-6 py-3">
                    Parent's last name
                  </th>
                </tr>
              </thead>
              <tbody>
                  {% for parent in parents %}
                  <tr class="bg-white text-blue-700 border-b">
                    <th scope="row" class="px-6 py-4 font-medium whitespace-nowrap">
                      {{ parent.FIRST_NAME }} 
                    </th>
                    <td class="px-6 py-4 font-medium">
                      {{ parent.LAST_NAME }}
                    </td>
                  </tr>
                  {% endfor %}
                </tr>
              </tbody>
            </table>
          </div>
          {% elif current_user.ROLE == 'parent' %}
          <div class="relative overflow-x-auto my-10">
            <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
              <thead class="text-xs text-white uppercase bg-blue-700">
                <tr>
                  <th scope="col" class="px-6 py-3">
                    Child's name
                  </th>
                  <th scope="col" class="px-6 py-3">
                    Status
                  </th>
                </tr>
              </thead>
              <tbody>
                {% for student in students %}
                  <tr class="bg-white text-blue-700 border-b">
                    <th scope="row" class="px-6 py-4 font-medium whitespace-nowrap">
                      {{ student.FIRST_NAME }} {{ student.LAST_NAME }}
                    </th>
                    <td class="px-6 py-4 font-medium">
                      {{ student.STATUS }}
                    </td>
                  </tr>
                {% endfor %}
                </tr>
              </tbody>
            </table>
          </div>
          {% endif %}
        </fieldset>
        <div class="form-group">
          {{ form.submit(class="w-full text-white bg-primary-600
          hover:bg-blue-700 focus:ring-4 focus:outline-none
          focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5
          text-center hover:cursor dark:bg-blue-600 dark:hover:bg-blue-700
          dark:focus:ring-blue-800") }}
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock content %}
